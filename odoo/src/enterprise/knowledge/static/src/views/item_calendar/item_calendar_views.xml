<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="knowledge.ArticleItemsCalendarController" t-inherit="web.CalendarController" owl="1">
        <xpath expr="//Layout" position="inside">
            <t t-set-slot="control-panel-create-button">
                <button t-if="model.canCreate" class="btn btn-primary" t-on-click="() => this.createRecord()">New</button>
            </t>
        </xpath>
        <xpath expr="//t[@t-set-slot='control-panel-navigation-additional']" position="inside">
            <!-- Calendar buttons are in the sidebar, which is not displayed when the view is embedded  -->
            <div t-if="env.isEmbeddedView" class="o_calendar_buttons d-flex justify-content-between">
                <button
                    class="btn btn-secondary btn-sm o_calendar_button_prev"
                    t-on-click.stop="() => this.setDate('previous')">
                    <i class="fa fa-chevron-left"/>
                </button>
                <button
                    class="btn btn-secondary mx-1 o_calendar_button_today"
                    t-on-click.stop="() => this.setDate('today')">
                    Today
                </button>
                <button
                    class="btn btn-secondary btn-sm me-1 o_calendar_button_next"
                    t-on-click.stop="() => this.setDate('next')">
                    <i class="fa fa-chevron-right"/>
                </button>
                <ViewScaleSelector scales="scales" currentScale="model.scale" setScale.bind="setScale" />
            </div>
        </xpath>
        <xpath expr="//div[@class='o_calendar_container']" position="inside">
            <div t-if="state.missingConfiguration" class="o_view_nocontent o_knowledge_item_calendar_nocontent">
                <div class="o_nocontent_help">
                    <p class="o_view_nocontent_empty_folder"/>
                    <p class="display-6">Missing Calendar configuration.</p>
                </div>
            </div>
        </xpath>
    </t>

    <t t-name="knowledge.ArticleItemsCalendarCommonPopover.body" t-inherit="web.CalendarCommonPopover.body" owl="1">
        <xpath expr="//li[@t-att-class='fieldInfo.attrs.class']" position="attributes">
            <attribute name="t-if">fieldInfo.type !== 'properties'</attribute>
        </xpath>
        <xpath expr="//li[@t-att-class='fieldInfo.attrs.class']" position="after">
            <li t-elif="slot.record.data[fieldName].some(property => property.view_in_kanban and property.value)"
                class="list-group-item flex-shrink-0 d-flex align-items-start pt-0 mt-n2" t-att-class="fieldInfo.attrs.class">
                <Field name="fieldName" record="slot.record" fieldInfo="fieldInfo" type="fieldInfo.widget"/>
            </li>
        </xpath>
    </t>

    <t t-name="knowledge.ArticleItemsCalendarCommonPopover.footer" owl="1">
        <a href="#" class="btn btn-primary" t-on-click="onEditEvent">Open</a>
        <t t-if="isEventDeletable">
            <a href="#" class="btn btn-secondary ms-2" t-on-click="onDeleteEvent"><i class="fa fa-trash"/></a>
        </t>
    </t>

</templates>
